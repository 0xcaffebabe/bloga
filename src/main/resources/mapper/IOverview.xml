<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wang.ismy.bloga.dao.inter.IOverview">
    <select id="getTodayOverview" resultType="int">
      SELECT COUNT(*) FROM log where DAY(time)=DAY(now()) and MONTH(time)=MONTH(now()) and YEAR(time)=YEAR(now())
UNION
SELECT COUNT(distinct ip) FROM log where DAY(time)=DAY(now()) and MONTH(time)=MONTH(now()) and YEAR(time)=YEAR(now())
UNION
SELECT COUNT(distinct url) FROM log where DAY(time)=DAY(now()) and MONTH(time)=MONTH(now()) and YEAR(time)=YEAR(now()) and url not like '%.css'
and url not like '%.js'
UNION
SELECT COUNT(*) FROM log where id in(select log_id from article_viewer) and DAY(time)=DAY(now()) and MONTH(time)=MONTH(now()) and YEAR(time)=YEAR(now());
    </select>
</mapper>